<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>소이의 공부방</title>

  <!-- 폰트 / 공통 스타일 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml"/>

  <!-- 공통 스크립트 (순서 유지) -->
  <script src="/js/config.js"></script>
  <script src="/js/core-auth-store.js"></script>
  <script src="/js/api-shim.js"></script>

  <!-- 포인트/인벤토리(로컬) -->
  <script src="/js/soi-store.js"></script>

  <!-- 헤더/로그아웃 -->
  <script src="/js/logout.js?v=LOGOUT_FORCE_2"></script>
  <script src="/js/header.js?v=HDR_MINIMAL_3"></script>

  <!-- 홈 전용 -->
  <script src="/js/home.js?v=HOME_1"></script>

  <style>
    .badge{padding:.2rem .5rem;border:1px solid #ddd;border-radius:999px;font-weight:600}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px}
    .card{border:1px solid #e5e5e5;border-radius:12px;padding:12px;background:#fff}
    .mini{color:#666;font-size:13px}
    .kpi{font-size:24px;font-weight:700}
    label.inline{display:flex;align-items:center;gap:8px}
    input[type=number], select{padding:8px;border:1px solid #ddd;border-radius:10px}
    button.btn{padding:10px 14px;border:1px solid #ddd;border-radius:12px;background:#fafafa;cursor:pointer}
    .cta{display:flex;gap:8px;flex-wrap:wrap}
    .quick{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    @media (max-width:640px){ .quick{grid-template-columns:1fr} }
    .barwrap{background:#f3f3f3;border-radius:8px;overflow:hidden;height:12px}
    .bar{height:100%;background:#7aa6ff}
    .links{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .link-card{border:1px solid #e5e5e5;border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:8px;background:#fff}
    .link-card a{display:inline-block}
  </style>
</head>
<body>
  <!-- 고정 헤더 -->
  <header class="main-header">
    <div class="logo">
      <a href="index.html">소이의 공부방 🎨</a>
    </div>
    <nav class="main-nav">
      <ul>
        <li class="active"><a href="index.html">오늘의 학습</a></li>
        <li><a href="report.html">학습 보고서</a></li>
        <li><a href="goal.html">나의 목표</a></li>
        <li><a href="record.html">상세 기록</a></li>
        <li><a href="notes.html">오답 노트</a></li>
        <li><a href="shop.html">상점</a></li>
        <li><span class="badge">포인트: <b data-soi-points>0</b>p</span></li>
      </ul>
    </nav>
    <div class="user-info">
      <span id="welcome-message"></span>
      <a href="index.html?reset=1" id="logout-button">(로그아웃)</a>
    </div>
    <button class="mobile-menu-button" aria-label="메뉴 열기">☰</button>
  </header>

  <!-- 본문 -->
  <main class="container" style="max-width:980px;margin:0 auto;padding:16px;">
    <h1>오늘의 학습 ✨</h1>
    <p class="mini">학년/과목을 고르고 바로 시작! 정답을 맞히면 포인트와 보상을 얻을 수 있어요.</p>

    <!-- 빠른 시작 -->
    <section class="card" style="margin:12px 0;">
      <h2 style="margin:0 0 8px;">빠른 시작</h2>
      <div class="quick">
        <label class="inline">학년
          <select id="sel-grade">
            <option value="">선택</option>
            <option>초1</option><option>초2</option><option>초3</option>
            <option>초4</option><option>초5</option><option>초6</option>
          </select>
        </label>
        <label class="inline">과목
          <select id="sel-subject">
            <option value="">선택</option>
            <option>국어</option><option>수학</option><option>사회</option>
            <option>과학</option><option>영어</option>
          </select>
        </label>
        <label class="inline">세트 수(지문/단일 묶음)
          <input type="number" id="sel-count" min="1" step="1" value="10"/>
        </label>
        <label class="inline">문항 타이머(초, 0=무제한)
          <input type="number" id="sel-timer" min="0" step="10" value="0"/>
        </label>
      </div>
      <div class="cta" style="margin-top:10px;">
        <button class="btn" id="btn-start">시작하기 ▶</button>
        <button class="btn" id="btn-review" title="오답이 있으면 복습 모드로 이동">오답 복습</button>
        <a class="btn" href="shop.html">상점 가기</a>
      </div>
      <div id="home-msg" class="mini" style="margin-top:6px;color:#d33;"></div>
    </section>

    <!-- 오늘 진행 -->
    <section class="grid" style="margin:12px 0;">
      <article class="card">
        <div class="mini">오늘 푼 문항</div>
        <div class="kpi"><span id="today-total">0</span></div>
        <div class="barwrap"><div id="bar-today" class="bar" style="width:0%"></div></div>
        <div class="mini">* 목표 대비 진행률은 <a href="goal.html">나의 목표</a>에서 확인/설정</div>
      </article>
      <article class="card">
        <div class="mini">오늘 정답 수(=획득 포인트)</div>
        <div class="kpi"><span id="today-correct">0</span>p</div>
      </article>
      <article class="card">
        <div class="mini">최근 세션</div>
        <div id="recent-session" class="mini">—</div>
      </article>
    </section>

    <!-- 바로가기 -->
    <section class="links" style="margin:12px 0;">
      <div class="link-card">
        <h3 style="margin:0;">학습 보고서</h3>
        <p class="mini">최근 7일 성과를 한눈에</p>
        <a class="btn" href="report.html">보고서 보기</a>
      </div>
      <div class="link-card">
        <h3 style="margin:0;">오답 노트</h3>
        <p class="mini">틀린 문제 복습/정리</p>
        <a class="btn" href="notes.html">오답 보러가기</a>
      </div>
      <div class="link-card">
        <h3 style="margin:0;">상세 기록</h3>
        <p class="mini">모든 세션을 필터/정렬</p>
        <a class="btn" href="record.html">기록 관리</a>
      </div>
      <div class="link-card">
        <h3 style="margin:0;">상점</h3>
        <p class="mini">포인트로 보상을 받자!</p>
        <a class="btn" href="shop.html">상점으로</a>
      </div>
    </section>
  </main>

  <!-- 푸터 -->
  <footer class="main-footer">
    <p>&copy; 2025 소이를 위한 아빠의 선물</p>
  </footer>
</body>
</html>
